---
import Layout from '../../../layouts/Layout.astro';
import { getCollection, render } from 'astro:content';
import { useTranslations } from '../../../i18n/utils';

const lang = 'en';
const t = useTranslations(lang);
const langPrefix = `${lang}/`;

export async function getStaticPaths() {
	const teamMembers = await getCollection('team');
	return teamMembers
		.filter((member) => member.id.startsWith('en/'))
		.map((member) => ({
			params: { slug: member.id.replace('en/', '') },
			props: { member },
		}));
}

const { member } = Astro.props;
const { data } = member;
const { Content } = await render(member);
const isSocio = data.role === 'socio';
---

<Layout
	title={data.name}
	description={`${data.name} - ${data.position} at Seibel HenrÃ­quez`}
	navbarDarkMode={true}
>
	<section class={isSocio ? 'bg-dark-slate' : 'bg-light-gray'}>
		<div class="max-w-360 pt-36 mx-auto grid grid-cols-1 lg:grid-cols-[2fr_3fr]">
			<div class="w-full aspect-3/4 overflow-hidden bg-gray-300">
				<img src={data.image} alt={data.imageAlt} class="w-full h-full object-cover object-top" />
			</div>

			<div class="px-6 py-10 lg:px-16 lg:py-16 flex flex-col justify-start">
				<p class="text-bronze text-sm md:text-base uppercase tracking-widest font-light">{data.position}</p>
				<h1 class:list={['text-2xl md:text-3xl lg:text-4xl font-medium tracking-wide mt-1', isSocio ? 'text-white' : 'text-dark-slate']}>
					{data.name}
				</h1>

				<div class:list={['flex flex-col gap-1 mt-6 text-sm md:text-base font-light', isSocio ? 'text-white' : 'text-dark-slate']}>
					<p>{data.phone}</p>
					<p class="lowercase">{data.email}</p>
				</div>

				{(data.languages.length > 0 || data.education.length > 0) && (
					<div class:list={['grid grid-cols-[auto_1fr] gap-x-12 gap-y-1 mt-8 text-sm md:text-base font-light', isSocio ? 'text-white' : 'text-dark-slate']}>
						{data.languages.length > 0 && (
							<div>
								<h3 class="font-medium tracking-wide mb-2">{t('member.idiomas')}</h3>
								{data.languages.map((l) => (
									<p class="font-light">{l}</p>
								))}
							</div>
						)}

						{data.education.length > 0 && (
							<div>
								<h3 class="font-medium tracking-wide mb-2">{t('member.educacion')}</h3>
								<div class="flex flex-col gap-4">
									{data.education.map((edu) => (
										<div>
											<p class="font-light">
												{edu.institution}
												{edu.location && (<><br />{edu.location}</>)}
											</p>
											<p class="font-light">{edu.degree}</p>
										</div>
									))}
								</div>
							</div>
						)}
					</div>
				)}
			</div>
		</div>
	</section>

	<section class="bg-light-gray py-16 md:py-24 px-6 md:px-12 lg:px-20">
		<div class="max-w-4xl mx-auto">
			<div class="w-24 h-0.75 bg-dark-slate mb-8"></div>
			<div class="member-content">
				<Content />
			</div>
		</div>
	</section>
</Layout>

<style>
	.member-content :global(p) {
		color: var(--color-dark-slate);
		font-weight: 300;
		font-size: 1.25rem;
		line-height: 1.75;
		margin-bottom: 1rem;
	}

	.member-content :global(h2) {
		color: var(--color-dark-slate);
		font-weight: 500;
		font-size: 1.5rem;
		letter-spacing: 0.025em;
		margin-top: 3rem;
		margin-bottom: 1rem;
	}

	.member-content :global(ul) {
		list-style-type: disc;
		padding-left: 1.5rem;
		margin-bottom: 1rem;
	}

	.member-content :global(li) {
		color: var(--color-dark-slate);
		font-weight: 300;
		font-size: 1rem;
		line-height: 1.75;
	}
</style>
